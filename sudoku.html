<!DOCTYPE HTML>
<HTML>
    <HEAD>
        <TITLE>Sudoku
</TITLE>
        <script type="text/javascript">
            var grid = [];
            var trans = [];
            var arr = [];
            var tempArr = [];
            var test = []; 
            var fillArr = [];
            var subFillArr = [];
            function doSomething() {
                makeGrid();

                fillGrid();

                console.table(grid);
                console.table(trans);
                console.log('ab');

            }

            function fillGrid() {
                //arr = getRandomArray();
                var x = 0;
                for (var row = 0; row < 3; row++) {
                    for (var col = 0; col < 3; col++) {
                        //tempArr = arr.slice();
                        //tempArr = getRandomArray();
                        fillArr =[];
                        
                        do{
                            for (var i = 0; i < 3; i++) {
                                subFillArr = [];
                            for (var j = 0; j < 3;) {                                
                                var posI = (row * 3) + i;
                                var posJ = (col * 3) + j;
                                //assignValue(posI, posJ);
                                var val = Math.round(Math.random() * 8) + 1;
                                if(grid[i].indexOf(val) == -1 && trans[j].indexOf(val) == -1){
                                    subFillArr.push(val);
                                    j++;
                                }
                                
                            }
                                fillArr.push(subFillArr);
                        }
                        }while(fillArr.length < 9)
                        for (var i = 0; i < 3; i++) {
                            for (var j = 0; j < 3; j++) {                                
                                var posI = (row * 3) + i;
                                var posJ = (col * 3) + j;
                                grid[posI][posJ] = fillArr[i][j].slice();
                                trans[posJ][posI] = fillArr[j][i].slice();
                            }
                        }
                    }
                }
            }

            function assignValue(i, j) {
                var k = 0;
                var value;
                do {
                    value = tempArr[k];
                    if (grid[i].indexOf(value) == -1 && trans[j].indexOf(value) == -1) {
                        grid[i][j] = value;
                        trans[j][i] = value;
                        tempArr.splice(k, 1);
                        break;
                    }
                    k++;
                } while (k < tempArr.length);
            }

            function getRandomArray() {
                var randomArr = [];
                var value;
                do {
                    value = Math.round(Math.random() * 8) + 1;
                    if (randomArr.indexOf(value) == -1) {
                        randomArr.push(value);
                    }
                } while (randomArr.length < 9);return randomArr;
            }

            function makeGrid() {
                grid =[];
                trans = [];
                for (var i = 0; i < 9; i++) {
                    var arr = [];
                    for (var j = 0; j < 9; j++) {
                        arr.push('a');
                    }
                    grid.push(arr.slice());
                    trans.push(arr.slice());
                    test.push(arr.slice());
                }
            }
        </script>
    </HEAD>
    <BODY>
        <input value="Go" type="button" onclick="doSomething()"/>
    </BODY>
</HTML>
